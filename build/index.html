<html>
<head>
<script type="text/javascript" src="main.bundle.js"></script></head>
<body>
<script>
    var apolloHttpLinkUrl = 'http://localhost:2000/graphql';
    var apolloWebSocketLinkUrl = 'ws://localhost:3000';

    var COMMENT_QUERY = gql`
      query Comment($repoName: String!) {
        entry(repoFullName: $repoName) {
          comments {
            id
            content
          }
        }
      }
    `;

    var httpLink = new apolloHttpLink({
        uri: apolloHttpLinkUrl
    });

    // Create a WebSocket link:
    var wsLink = new apolloWebSocketLink({
        uri: apolloWebSocketLinkUrl,
        options: {
            reconnect: true
        }
    });

    var client = new apolloClient({
        link: apolloCreateUniLink(httpLink, wsLink),
        cache: new apolloInMemoryCache()
    });

    client.watchQuery({
        query: COMMENT_QUERY,
        variables: {}
    }).subscribe(function (res) {
        console.log('client.watchQuery', res);
    });
</script>
</body>
</html>